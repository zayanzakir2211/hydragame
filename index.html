<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Hydra Car Racing</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
    }

    body {
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #1a1a2e 75%, #16213e 100%);
      background-size: 400% 400%;
      animation: gradientShift 20s ease infinite;
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(100, 200, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 100, 200, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(150, 100, 255, 0.05) 0%, transparent 40%);
      pointer-events: none;
      z-index: 0;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Floating orbs for depth */
    .orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.4;
      pointer-events: none;
      z-index: 0;
    }

    .orb-1 {
      width: 400px;
      height: 400px;
      background: linear-gradient(135deg, rgba(100, 200, 255, 0.3), rgba(150, 100, 255, 0.2));
      top: -150px;
      left: -150px;
      animation: float1 12s ease-in-out infinite;
    }

    .orb-2 {
      width: 300px;
      height: 300px;
      background: linear-gradient(135deg, rgba(255, 100, 200, 0.25), rgba(255, 150, 100, 0.2));
      bottom: 5%;
      right: -100px;
      animation: float2 15s ease-in-out infinite;
    }

    .orb-3 {
      width: 200px;
      height: 200px;
      background: linear-gradient(135deg, rgba(100, 255, 200, 0.2), rgba(100, 200, 255, 0.15));
      top: 40%;
      left: 5%;
      animation: float3 18s ease-in-out infinite;
    }

    .orb-4 {
      width: 250px;
      height: 250px;
      background: linear-gradient(135deg, rgba(255, 200, 100, 0.2), rgba(255, 100, 150, 0.15));
      top: 20%;
      right: 10%;
      animation: float4 14s ease-in-out infinite;
    }

    @keyframes float1 {
      0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
      33% { transform: translate(40px, 30px) scale(1.1) rotate(5deg); }
      66% { transform: translate(-20px, 50px) scale(0.95) rotate(-3deg); }
    }

    @keyframes float2 {
      0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
      50% { transform: translate(-40px, -60px) scale(0.9) rotate(-5deg); }
    }

    @keyframes float3 {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(60px, -30px) scale(1.1); }
    }

    @keyframes float4 {
      0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
      50% { transform: translate(-30px, 40px) scale(1.05) rotate(3deg); }
    }

    /* Header with glass effect */
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 12px 0;
      padding: 12px 25px;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.15);
      z-index: 10;
      position: relative;
    }

    .header-logo {
      font-size: 2rem;
      animation: carBounce 2s ease-in-out infinite;
    }

    @keyframes carBounce {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-3px) rotate(5deg); }
    }

    h1 {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.9) 50%, #64c8ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .game-container {
      position: relative;
      width: 95%;
      max-width: 480px;
      height: 68vh;
      overflow: hidden;
      border-radius: 35px;
      z-index: 10;
      
      /* Liquid Glass Effect */
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.12) 0%,
        rgba(255, 255, 255, 0.05) 50%,
        rgba(255, 255, 255, 0.02) 100%
      );
      backdrop-filter: blur(25px) saturate(180%);
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      
      /* Glass border */
      border: 1.5px solid rgba(255, 255, 255, 0.2);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.1) inset,
        0 25px 80px -15px rgba(0, 0, 0, 0.4),
        0 0 120px rgba(100, 200, 255, 0.1);
    }

    .game-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 40%;
      background: linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.08) 0%,
        transparent 100%
      );
      border-radius: 35px 35px 0 0;
      pointer-events: none;
      z-index: 5;
    }

    #gameCanvas {
      background: transparent;
      display: block;
      width: 100%;
      height: 100%;
      border-radius: 35px;
    }

    /* Glass UI Elements */
    .glass-panel {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.15) 0%,
        rgba(255, 255, 255, 0.05) 100%
      );
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      box-shadow: 
        0 4px 20px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
    }

    .score-container {
      position: absolute;
      top: 12px;
      left: 12px;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 10px 16px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .score-container .icon {
      font-size: 1rem;
    }

    .top-score {
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 10px 16px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .top-score .icon {
      font-size: 1rem;
      animation: crownPulse 2s ease-in-out infinite;
    }

    @keyframes crownPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Stats panel */
    .stats-panel {
      position: absolute;
      bottom: 12px;
      left: 12px;
      right: 12px;
      font-size: 0.75rem;
      font-weight: 500;
      padding: 10px 14px;
      z-index: 10;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .stat-item .stat-icon {
      font-size: 0.9rem;
    }

    .stat-value {
      font-weight: 700;
      color: #64c8ff;
    }

    /* Coin counter */
    .coins-display {
      position: absolute;
      top: 55px;
      left: 12px;
      font-size: 0.8rem;
      font-weight: 600;
      padding: 8px 14px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 180, 0, 0.1) 100%);
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .coins-display .coin-icon {
      font-size: 1rem;
      animation: coinSpin 3s linear infinite;
    }

    @keyframes coinSpin {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(360deg); }
    }

    /* Combo display */
    .combo-display {
      position: absolute;
      top: 55px;
      right: 12px;
      font-size: 0.8rem;
      font-weight: 700;
      padding: 8px 14px;
      z-index: 10;
      display: none;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, rgba(255, 100, 150, 0.25) 0%, rgba(255, 50, 100, 0.15) 100%);
      border: 1px solid rgba(255, 100, 150, 0.4);
      animation: comboGlow 0.5s ease-in-out infinite alternate;
    }

    @keyframes comboGlow {
      from { box-shadow: 0 0 10px rgba(255, 100, 150, 0.3); }
      to { box-shadow: 0 0 20px rgba(255, 100, 150, 0.5); }
    }

    /* Power-up indicator */
    .powerup-indicator {
      position: absolute;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.85rem;
      font-weight: 600;
      padding: 8px 20px;
      z-index: 10;
      display: none;
      align-items: center;
      gap: 8px;
      background: linear-gradient(135deg, rgba(100, 255, 200, 0.3) 0%, rgba(50, 200, 150, 0.2) 100%);
      border: 1px solid rgba(100, 255, 200, 0.5);
      border-radius: 25px;
      animation: powerupPulse 1s ease-in-out infinite;
    }

    @keyframes powerupPulse {
      0%, 100% { transform: translateX(-50%) scale(1); opacity: 1; }
      50% { transform: translateX(-50%) scale(1.05); opacity: 0.9; }
    }

    .controls {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 480px;
      margin-top: 18px;
      padding: 0 15px;
      align-items: center;
      z-index: 10;
      position: relative;
    }

    .control-btn {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      color: white;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      
      /* Liquid Glass Button */
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.2) 0%,
        rgba(255, 255, 255, 0.08) 50%,
        rgba(255, 255, 255, 0.03) 100%
      );
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
      border: 1.5px solid rgba(255, 255, 255, 0.25);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1) inset,
        0 -2px 10px rgba(255, 255, 255, 0.05) inset;
      
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .control-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.15) 0%,
        transparent 100%
      );
      border-radius: 50% 50% 0 0;
      pointer-events: none;
    }

    .control-btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.3s, height 0.3s;
    }

    .control-btn:active {
      transform: scale(0.9);
      box-shadow: 
        0 4px 20px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.15) inset;
    }

    .control-btn:active::after {
      width: 120%;
      height: 120%;
    }

    .control-btn i {
      position: relative;
      z-index: 2;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }

    #playPauseBtn {
      width: 80px;
      height: 80px;
      font-size: 1.8rem;
      background: linear-gradient(
        135deg,
        rgba(100, 200, 255, 0.35) 0%,
        rgba(150, 100, 255, 0.25) 50%,
        rgba(255, 100, 200, 0.15) 100%
      );
      border: 1.5px solid rgba(255, 255, 255, 0.35);
      animation: pulseGlow 3s ease-in-out infinite;
    }

    @keyframes pulseGlow {
      0%, 100% { 
        box-shadow: 0 8px 32px rgba(100, 200, 255, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
        border-color: rgba(100, 200, 255, 0.4);
      }
      50% { 
        box-shadow: 0 8px 45px rgba(150, 100, 255, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        border-color: rgba(150, 100, 255, 0.5);
      }
    }

    .game-over {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
      border-radius: 35px;
      
      /* Frosted glass overlay */
      background: linear-gradient(
        135deg,
        rgba(0, 0, 0, 0.7) 0%,
        rgba(30, 30, 60, 0.8) 100%
      );
      backdrop-filter: blur(40px) saturate(150%);
      -webkit-backdrop-filter: blur(40px) saturate(150%);
    }

    .game-over-content {
      text-align: center;
      padding: 35px 40px;
      border-radius: 30px;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.12) 0%,
        rgba(255, 255, 255, 0.04) 100%
      );
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
      animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
      max-width: 90%;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .game-over h2 {
      font-size: 2rem;
      margin-bottom: 8px;
      font-weight: 700;
      background: linear-gradient(135deg, #ff6b6b, #ffa500, #ff6b6b);
      background-size: 200% 200%;
      animation: gradientText 2s ease infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    @keyframes gradientText {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .game-over .stats-summary {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px;
    }

    .stats-summary .stat {
      text-align: center;
    }

    .stats-summary .stat-label {
      font-size: 0.7rem;
      opacity: 0.7;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stats-summary .stat-value {
      font-size: 1.4rem;
      font-weight: 700;
      color: #64c8ff;
    }

    .game-over p {
      font-size: 1.1rem;
      margin-bottom: 20px;
      font-weight: 500;
      opacity: 0.9;
    }

    .game-over-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .restart-btn, .reset-btn {
      border: none;
      padding: 14px 32px;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .restart-btn {
      background: linear-gradient(
        135deg,
        rgba(100, 200, 255, 0.5) 0%,
        rgba(100, 150, 255, 0.4) 100%
      );
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 25px rgba(100, 150, 255, 0.25);
    }

    .restart-btn:hover, .restart-btn:active {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 12px 35px rgba(100, 150, 255, 0.35);
    }

    .reset-btn {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(255, 255, 255, 0.05) 100%
      );
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      font-size: 0.85rem;
      padding: 10px 24px;
    }

    .reset-btn:hover, .reset-btn:active {
      transform: translateY(-2px);
      background: linear-gradient(135deg, rgba(255, 100, 100, 0.3) 0%, rgba(255, 80, 80, 0.2) 100%);
      border-color: rgba(255, 100, 100, 0.4);
    }

    .new-record {
      display: none;
      font-size: 1rem;
      color: #ffd700;
      margin-bottom: 10px;
      animation: recordBounce 0.8s ease infinite;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    }

    @keyframes recordBounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-8px) scale(1.05); }
    }

    /* Countdown overlay */
    .countdown-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 90;
      border-radius: 35px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
    }

    .countdown-number {
      font-size: 6rem;
      font-weight: 700;
      color: white;
      text-shadow: 0 0 40px rgba(100, 200, 255, 0.8);
      animation: countdownPop 1s ease-out;
    }

    @keyframes countdownPop {
      0% { transform: scale(2); opacity: 0; }
      50% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); opacity: 0.8; }
    }

    @media (max-width: 500px) {
      .header {
        padding: 10px 20px;
        margin: 8px 0;
      }
      h1 {
        font-size: 1.5rem;
      }
      .header-logo {
        font-size: 1.6rem;
      }
      .controls {
        margin-top: 12px;
        padding: 0 10px;
      }
      .control-btn {
        width: 62px;
        height: 62px;
        font-size: 1.4rem;
      }
      #playPauseBtn {
        width: 70px;
        height: 70px;
      }
      .game-container {
        height: 60vh;
        border-radius: 28px;
      }
      .game-over-content {
        padding: 25px 30px;
        margin: 0 15px;
      }
      .game-over h2 {
        font-size: 1.6rem;
      }
      .stats-summary {
        gap: 15px;
      }
    }

    .footer {
      text-align: center;
      margin-top: 12px;
      margin-bottom: 8px;
      max-width: 480px;
      padding: 8px 20px;
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.5);
      z-index: 10;
      position: relative;
      background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    .footer a {
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
    }

    /* Toast notifications */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      padding: 12px 25px;
      background: linear-gradient(135deg, rgba(100, 255, 150, 0.3) 0%, rgba(50, 200, 100, 0.2) 100%);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(100, 255, 150, 0.4);
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      z-index: 1000;
      transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
    }

    .toast.warning {
      background: linear-gradient(135deg, rgba(255, 200, 100, 0.3) 0%, rgba(255, 150, 50, 0.2) 100%);
      border-color: rgba(255, 200, 100, 0.4);
    }
  </style>
</head>
<body>
  <!-- Floating orbs for depth -->
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="orb orb-4"></div>

  <!-- Toast notification -->
  <div class="toast" id="toast"></div>

  <div class="header">
    <span class="header-logo">üèéÔ∏è</span>
    <h1>HYDRA RACING</h1>
  </div>

  <div class="game-container">
    <div class="score-container glass-panel">
      <span class="icon">üèÅ</span>
      <span>Score: <span id="score">0</span></span>
    </div>
    <div class="top-score glass-panel">
      <span class="icon">üëë</span>
      <span>Best: <span id="topScore">0</span></span>
    </div>
    <div class="coins-display glass-panel">
      <span class="coin-icon">ü™ô</span>
      <span id="coins">0</span>
    </div>
    <div class="combo-display glass-panel" id="comboDisplay">
      <span>üî•</span>
      <span>x<span id="comboCount">0</span></span>
    </div>
    <div class="powerup-indicator glass-panel" id="powerupIndicator">
      <span id="powerupIcon">üõ°Ô∏è</span>
      <span id="powerupText">Shield Active</span>
      <span id="powerupTimer">5s</span>
    </div>
    <div class="stats-panel glass-panel">
      <div class="stat-item">
        <span class="stat-icon">‚ö°</span>
        <span>Speed: <span class="stat-value" id="speedDisplay">1.0x</span></span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">üìè</span>
        <span>Distance: <span class="stat-value" id="distanceDisplay">0m</span></span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">üöó</span>
        <span>Dodged: <span class="stat-value" id="dodgedDisplay">0</span></span>
      </div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <!-- Countdown overlay -->
    <div class="countdown-overlay" id="countdownOverlay">
      <div class="countdown-number" id="countdownNumber">3</div>
    </div>

    <div class="game-over" id="gameOverScreen">
      <div class="game-over-content">
        <h2>üí• Game Over!</h2>
        <p class="new-record" id="newRecord">üéâ NEW HIGH SCORE! üéâ</p>
        <div class="stats-summary">
          <div class="stat">
            <div class="stat-value" id="finalScore">0</div>
            <div class="stat-label">Score</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="finalCoins">0</div>
            <div class="stat-label">Coins</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="finalDistance">0m</div>
            <div class="stat-label">Distance</div>
          </div>
        </div>
        <div class="game-over-buttons">
          <button class="restart-btn" id="restartBtn">
            <i class="fa-solid fa-rotate-right"></i> Play Again
          </button>
          <button class="reset-btn" id="resetTopScoreBtn">
            <i class="fa-solid fa-trash"></i> Reset Best Score
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="controls">
    <div class="control-btn" id="leftBtn"><i class="fa-solid fa-chevron-left"></i></div>
    <div class="control-btn" id="playPauseBtn"><i class="fa-solid fa-play"></i></div>
    <div class="control-btn" id="rightBtn"><i class="fa-solid fa-chevron-right"></i></div>
  </div>

  <p class="footer">¬© 2025 Zayan ‚Ä¢ Hydra Racing v2.0</p>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreElement = document.getElementById('score');
    const topScoreElement = document.getElementById('topScore');
    const finalScoreElement = document.getElementById('finalScore');
    const speedDisplay = document.getElementById('speedDisplay');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const newRecordElement = document.getElementById('newRecord');
    const restartBtn = document.getElementById('restartBtn');
    const resetTopScoreBtn = document.getElementById('resetTopScoreBtn');
    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = playPauseBtn.querySelector('i');

    function resizeCanvas() {
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    let topScore = localStorage.getItem('hydra_top_score') || 0;
    topScoreElement.textContent = topScore;

    let game = {
      running: false,
      score: 0,
      speed: 3,
      roadWidth: canvas.width * 0.7,
      roadX: (canvas.width - canvas.width * 0.7) / 2,
      laneCount: 4,
      currentLane: 1,
      carWidth: canvas.width * 0.12,
      carHeight: canvas.width * 0.18,
      carX: 0,
      carY: 0,
      obstacles: [],
      lastObstacleTime: 0,
      roadMarkings: [],
      lastRoadMarkingTime: 0,
      particles: [],
      stars: []
    };

    // Initialize stars
    function initStars() {
      game.stars = [];
      for (let i = 0; i < 30; i++) {
        game.stars.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 2 + 0.5,
          speed: Math.random() * 0.5 + 0.2,
          opacity: Math.random() * 0.5 + 0.3
        });
      }
    }

    function initCar() {
      const laneWidth = game.roadWidth / game.laneCount;
      game.carX = game.roadX + laneWidth * game.currentLane + laneWidth / 2 - game.carWidth / 2;
      game.carY = canvas.height - game.carHeight - 30;
    }

    function drawBackground() {
      // Dark gradient background
      const bgGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
      bgGrad.addColorStop(0, 'rgba(20, 20, 40, 0.9)');
      bgGrad.addColorStop(1, 'rgba(30, 30, 60, 0.9)');
      ctx.fillStyle = bgGrad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Draw stars
      for (const star of game.stars) {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
        ctx.fill();
        
        if (game.running) {
          star.y += star.speed;
          if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
          }
        }
      }
    }

    function drawRoad() {
      // Road gradient with glass effect
      const roadGrad = ctx.createLinearGradient(game.roadX, 0, game.roadX + game.roadWidth, 0);
      roadGrad.addColorStop(0, 'rgba(60, 60, 80, 0.8)');
      roadGrad.addColorStop(0.5, 'rgba(80, 80, 100, 0.9)');
      roadGrad.addColorStop(1, 'rgba(60, 60, 80, 0.8)');
      
      // Main road
      ctx.fillStyle = roadGrad;
      ctx.beginPath();
      ctx.roundRect(game.roadX, 0, game.roadWidth, canvas.height, [0, 0, 0, 0]);
      ctx.fill();

      // Road shine effect
      const shineGrad = ctx.createLinearGradient(game.roadX, 0, game.roadX + game.roadWidth, 0);
      shineGrad.addColorStop(0, 'rgba(255, 255, 255, 0)');
      shineGrad.addColorStop(0.3, 'rgba(255, 255, 255, 0.05)');
      shineGrad.addColorStop(0.5, 'rgba(255, 255, 255, 0.1)');
      shineGrad.addColorStop(0.7, 'rgba(255, 255, 255, 0.05)');
      shineGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');
      ctx.fillStyle = shineGrad;
      ctx.fillRect(game.roadX, 0, game.roadWidth, canvas.height);

      // Lane markings with glow
      const laneWidth = game.roadWidth / game.laneCount;
      for (let i = 1; i < game.laneCount; i++) {
        const x = game.roadX + i * laneWidth;
        
        for (const marking of game.roadMarkings) {
          // Glow effect
          ctx.shadowColor = 'rgba(255, 255, 255, 0.5)';
          ctx.shadowBlur = 8;
          
          ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
          ctx.lineWidth = 3;
          ctx.setLineDash([25, 25]);
          ctx.lineDashOffset = -marking.y;
          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, canvas.height);
          ctx.stroke();
          
          ctx.shadowBlur = 0;
        }
      }
      ctx.setLineDash([]);

      // Road edges with glow
      ctx.shadowColor = 'rgba(255, 150, 200, 0.8)';
      ctx.shadowBlur = 15;
      ctx.strokeStyle = 'rgba(255, 150, 200, 0.8)';
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.moveTo(game.roadX, 0);
      ctx.lineTo(game.roadX, canvas.height);
      ctx.stroke();
      
      ctx.shadowColor = 'rgba(100, 200, 255, 0.8)';
      ctx.beginPath();
      ctx.moveTo(game.roadX + game.roadWidth, 0);
      ctx.lineTo(game.roadX + game.roadWidth, canvas.height);
      ctx.stroke();
      ctx.shadowBlur = 0;
    }

    function drawCar() {
      const x = game.carX;
      const y = game.carY;
      const w = game.carWidth;
      const h = game.carHeight;

      ctx.save();
      
      // Car shadow
      ctx.shadowColor = 'rgba(100, 150, 255, 0.5)';
      ctx.shadowBlur = 20;
      ctx.shadowOffsetY = 5;

      // Car body gradient
      const bodyGrad = ctx.createLinearGradient(x, y, x + w, y + h);
      bodyGrad.addColorStop(0, '#667eea');
      bodyGrad.addColorStop(0.5, '#764ba2');
      bodyGrad.addColorStop(1, '#667eea');

      // Main body
      ctx.fillStyle = bodyGrad;
      ctx.beginPath();
      ctx.roundRect(x + 2, y + h * 0.15, w - 4, h * 0.7, 5);
      ctx.fill();

      // Car top/cabin
      const cabinGrad = ctx.createLinearGradient(x, y, x, y + h * 0.5);
      cabinGrad.addColorStop(0, 'rgba(150, 200, 255, 0.9)');
      cabinGrad.addColorStop(1, 'rgba(100, 150, 255, 0.6)');
      ctx.fillStyle = cabinGrad;
      ctx.beginPath();
      ctx.roundRect(x + w * 0.15, y + h * 0.25, w * 0.7, h * 0.35, 4);
      ctx.fill();

      // Windshield shine
      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.beginPath();
      ctx.roundRect(x + w * 0.2, y + h * 0.28, w * 0.3, h * 0.15, 2);
      ctx.fill();

      ctx.shadowBlur = 0;

      // Wheels with glow
      ctx.fillStyle = '#1a1a2e';
      ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
      ctx.shadowBlur = 5;
      
      // Front wheels
      ctx.beginPath();
      ctx.roundRect(x - 4, y + h * 0.12, 8, h * 0.2, 2);
      ctx.fill();
      ctx.beginPath();
      ctx.roundRect(x + w - 4, y + h * 0.12, 8, h * 0.2, 2);
      ctx.fill();
      
      // Rear wheels
      ctx.beginPath();
      ctx.roundRect(x - 4, y + h * 0.68, 8, h * 0.2, 2);
      ctx.fill();
      ctx.beginPath();
      ctx.roundRect(x + w - 4, y + h * 0.68, 8, h * 0.2, 2);
      ctx.fill();

      // Headlights
      ctx.shadowColor = 'rgba(255, 255, 150, 0.8)';
      ctx.shadowBlur = 10;
      ctx.fillStyle = '#ffffa0';
      ctx.beginPath();
      ctx.arc(x + w * 0.25, y + h * 0.1, 4, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(x + w * 0.75, y + h * 0.1, 4, 0, Math.PI * 2);
      ctx.fill();

      // Taillights
      ctx.shadowColor = 'rgba(255, 50, 50, 0.8)';
      ctx.fillStyle = '#ff4444';
      ctx.beginPath();
      ctx.arc(x + w * 0.2, y + h * 0.9, 3, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(x + w * 0.8, y + h * 0.9, 3, 0, Math.PI * 2);
      ctx.fill();

      ctx.restore();

      // Speed particles
      if (game.running && game.speed > 4) {
        for (let i = 0; i < 2; i++) {
          game.particles.push({
            x: x + w / 2 + (Math.random() - 0.5) * w,
            y: y + h,
            vx: (Math.random() - 0.5) * 2,
            vy: Math.random() * 3 + 2,
            life: 1,
            size: Math.random() * 3 + 1
          });
        }
      }
    }

    function drawObstacles() {
      for (const o of game.obstacles) {
        ctx.save();
        
        // Obstacle shadow
        ctx.shadowColor = 'rgba(255, 100, 50, 0.5)';
        ctx.shadowBlur = 15;

        // Obstacle body gradient
        const obsGrad = ctx.createLinearGradient(o.x, o.y, o.x + o.width, o.y + o.height);
        obsGrad.addColorStop(0, '#ff6b35');
        obsGrad.addColorStop(0.5, '#f7931e');
        obsGrad.addColorStop(1, '#ff6b35');

        ctx.fillStyle = obsGrad;
        ctx.beginPath();
        ctx.roundRect(o.x + 2, o.y + o.height * 0.1, o.width - 4, o.height * 0.8, 5);
        ctx.fill();

        // Obstacle window
        ctx.fillStyle = 'rgba(50, 50, 80, 0.8)';
        ctx.beginPath();
        ctx.roundRect(o.x + o.width * 0.15, o.y + o.height * 0.2, o.width * 0.7, o.height * 0.35, 3);
        ctx.fill();

        // Window shine
        ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
        ctx.beginPath();
        ctx.roundRect(o.x + o.width * 0.2, o.y + o.height * 0.22, o.width * 0.3, o.height * 0.15, 2);
        ctx.fill();

        ctx.shadowBlur = 0;

        // Obstacle wheels
        ctx.fillStyle = '#1a1a2e';
        ctx.beginPath();
        ctx.roundRect(o.x - 3, o.y + o.height * 0.15, 6, o.height * 0.18, 2);
        ctx.fill();
        ctx.beginPath();
        ctx.roundRect(o.x + o.width - 3, o.y + o.height * 0.15, 6, o.height * 0.18, 2);
        ctx.fill();
        ctx.beginPath();
        ctx.roundRect(o.x - 3, o.y + o.height * 0.67, 6, o.height * 0.18, 2);
        ctx.fill();
        ctx.beginPath();
        ctx.roundRect(o.x + o.width - 3, o.y + o.height * 0.67, 6, o.height * 0.18, 2);
        ctx.fill();

        // Taillights (facing player)
        ctx.shadowColor = 'rgba(255, 50, 50, 0.8)';
        ctx.shadowBlur = 8;
        ctx.fillStyle = '#ff3333';
        ctx.beginPath();
        ctx.arc(o.x + o.width * 0.2, o.y + o.height * 0.92, 3, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(o.x + o.width * 0.8, o.y + o.height * 0.92, 3, 0, Math.PI * 2);
        ctx.fill();

        ctx.restore();
      }
    }

    function drawParticles() {
      for (let i = game.particles.length - 1; i >= 0; i--) {
        const p = game.particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life -= 0.03;

        if (p.life <= 0) {
          game.particles.splice(i, 1);
          continue;
        }

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(150, 200, 255, ${p.life * 0.5})`;
        ctx.fill();
      }
    }

    function update() {
      if (!game.running) return;
      
      const laneWidth = game.roadWidth / game.laneCount;
      const targetX = game.roadX + laneWidth * game.currentLane + laneWidth / 2 - game.carWidth / 2;
      game.carX += (targetX - game.carX) * 0.15;
      
      const now = Date.now();

      if (now - game.lastRoadMarkingTime > 400) {
        game.roadMarkings.push({ y: 0 });
        game.lastRoadMarkingTime = now;
      }
      for (const m of game.roadMarkings) m.y += game.speed;
      game.roadMarkings = game.roadMarkings.filter(m => m.y < canvas.height);

      if (now - game.lastObstacleTime > 1800 - Math.min(game.score * 8, 1200)) {
        const lane = Math.floor(Math.random() * game.laneCount);
        const w = laneWidth * 0.75;
        const x = game.roadX + lane * laneWidth + (laneWidth - w) / 2;
        game.obstacles.push({ 
          x, 
          y: -80, 
          width: w, 
          height: game.carHeight * 0.85
        });
        game.lastObstacleTime = now;
      }

      for (const o of game.obstacles) {
        o.y += game.speed;
        
        // Collision detection with some padding
        const padding = 5;
        if (o.y + o.height > game.carY + padding &&
            o.y < game.carY + game.carHeight - padding &&
            o.x + o.width > game.carX + padding &&
            o.x < game.carX + game.carWidth - padding) {
          return gameOver();
        }
      }
      
      game.obstacles = game.obstacles.filter(o => o.y < canvas.height);
      game.score += 0.1;
      scoreElement.textContent = Math.floor(game.score);
      game.speed = 3 + Math.floor(game.score / 10) * 0.25;
      speedDisplay.textContent = (game.speed / 3).toFixed(1) + 'x';
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBackground();
      drawRoad();
      drawParticles();
      drawObstacles();
      drawCar();
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    function startGame() {
      game.running = true;
      playIcon.className = "fa-solid fa-pause";
      playPauseBtn.style.animation = 'none';
    }

    function pauseGame() {
      game.running = false;
      playIcon.className = "fa-solid fa-play";
      playPauseBtn.style.animation = 'pulseGlow 2s ease-in-out infinite';
    }

    function togglePlayPause() {
      game.running ? pauseGame() : startGame();
    }

    function gameOver() {
      game.running = false;
      playIcon.className = "fa-solid fa-play";
      playPauseBtn.style.animation = 'pulseGlow 2s ease-in-out infinite';
      
      const finalScore = Math.floor(game.score);
      finalScoreElement.textContent = finalScore;
      
      if (finalScore > topScore) {
        topScore = finalScore;
        localStorage.setItem('hydra_top_score', topScore);
        topScoreElement.textContent = topScore;
        newRecordElement.style.display = 'block';
      } else {
        newRecordElement.style.display = 'none';
      }
      
      gameOverScreen.style.display = 'flex';
    }

    function moveLeft() {
      if (game.running && game.currentLane > 0) game.currentLane--;
    }
    
    function moveRight() {
      if (game.running && game.currentLane < game.laneCount - 1) game.currentLane++;
    }

    // Event Listeners
    leftBtn.addEventListener('mousedown', moveLeft);
    leftBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveLeft(); });
    rightBtn.addEventListener('mousedown', moveRight);
    rightBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveRight(); });
    playPauseBtn.addEventListener('click', togglePlayPause);

    window.addEventListener('keydown', (e) => {
      if (e.key === ' ' || e.key === 'Escape') {
        e.preventDefault();
        togglePlayPause();
        return;
      }
      if (!game.running) return;
      if (['ArrowLeft', 'a', 'A'].includes(e.key)) moveLeft();
      if (['ArrowRight', 'd', 'D'].includes(e.key)) moveRight();
    });

    restartBtn.addEventListener('click', () => {
      game.score = 0;
      game.speed = 3;
      game.obstacles = [];
      game.roadMarkings = [];
      game.particles = [];
      game.lastObstacleTime = 0;
      game.lastRoadMarkingTime = 0;
      game.currentLane = 1;
      scoreElement.textContent = '0';
      speedDisplay.textContent = '1.0x';
      gameOverScreen.style.display = 'none';
      initCar();
      startGame();
    });

    resetTopScoreBtn.addEventListener('click', () => {
      localStorage.removeItem('hydra_top_score');
      topScore = 0;
      topScoreElement.textContent = '0';
    });

    canvas.addEventListener('contextmenu', e => e.preventDefault());
    
    // Initialize
    initStars();
    initCar();
    loop();
    pauseGame();
  </script>
</body>
</html>